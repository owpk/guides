if(window.innerWidth>979){function getScrollPercent(){var h=document.documentElement,b=document.body,st='scrollTop',sh='scrollHeight';return((h[st]||b[st])/((h[sh]||b[sh])-h.clientHeight))*100;}
function checkElevatorLoading(evt){if(getScrollPercent()>20){document.removeEventListener('scroll',checkElevatorLoading,{capture:true,passive:true});loadTprogerElevator();console.log('Elevator loaded');}}
document.addEventListener('scroll',checkElevatorLoading,{capture:true,passive:true});function loadTprogerElevator(){var arrow_wrapper=document.getElementById('tproger-elevator');var arrow=document.getElementById('tproger-arrow');var content=document.getElementById('content');content.coords=getCoords(content);var elevatorLastPosition=0;var isEggElevating=false;var lightbox_is_open=false;var setArrowToBottom=function(){console.log('Ding!');arrow.classList.add('elevator-arrow-bottom');};var elevator=new Elevator({duration:1000,volumeAudio:0.1,endCallback:setArrowToBottom});var egg=new Elevator({mainAudio:tprogerElevator.pluginsUrl.replace('tproger.ru','cdn.tproger.ru')+
'/tproger-elevator/assets/music/elevator-music-min.ogg',endAudio:tprogerElevator.pluginsUrl.replace('tproger.ru','cdn.tproger.ru')+
'/tproger-elevator/assets/music/ding-min.ogg',volumeAudio:0.1,endCallback:function(){setArrowToBottom();isEggElevating=false;}});document.addEventListener('click',function(event){if(document.querySelectorAll('.mfp-img').length>0){lightbox_is_open=true;arrow_wrapper.style.display='none';}
if(event.clientX>60)return;if(event.toElement.tagName==='SELECT')return
if(event.clientX>content.coords.left||lightbox_is_open){if(document.querySelectorAll('.mfp-img').length<1){lightbox_is_open=false;arrow_wrapper.style.display='';}
return;}
if(getScrollTop()<document.body.offsetHeight&&elevatorLastPosition!=0&&elevatorLastPosition!=getScrollTop()){window.scrollTo(0,elevatorLastPosition);arrow.classList.remove('elevator-arrow-bottom');}else{elevatorLastPosition=getScrollTop();if(document.body.scrollHeight-getScrollTop()<=document.body.offsetHeight){egg.elevate();isEggElevating=true;}else{if(isEggElevating==false){elevator.elevate();}else{egg.elevate();}}}});window.addEventListener('scroll',function(){if(getScrollTop()>document.body.offsetHeight){if(arrow.classList.contains('elevator-arrow-bottom')){arrow.classList.remove('elevator-arrow-bottom');}
arrow_wrapper.style.display='block';}});function getCoords(elem){var box=elem.getBoundingClientRect();return{top:box.top+pageYOffset,left:box.left+pageXOffset};}}
function getScrollTop(){return document.documentElement.scrollTop||document.body.scrollTop;}}